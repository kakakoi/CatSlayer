# Git Hooks関連のルール
git_hooks:
  # 必要なパッケージ
  required_packages:
    - husky
    - lint-staged

  # pre-commitフックの設定
  pre_commit_config:
    command: "npx lint-staged"
    lint_staged_config:
      "*.{js,ts}":
        - "biome format"
        - "biome lint"
        - "biome check"
        - "tsc --noEmit"

  # インストール後の手順
  setup_steps:
    1: "npm uninstall simple-git-hooks"  # 既存のGit Hooks管理ツールを削除
    2: "rm -rf .git/hooks/*"  # 既存のGit Hooksをクリーンアップ
    3: "npm install -D husky lint-staged"  # 必要なパッケージをインストール
    4: "npx husky init"  # Huskyを初期化
    5: "npx husky add .husky/pre-commit 'npx lint-staged'"  # pre-commitフックを設定

  # トラブルシューティング
  troubleshooting:
    1: "pre-commitフックが実行されない場合":
      - ".husky/pre-commitの内容を確認"
      - "chmod ug+x .husky/* で実行権限を確認"
      - "setup_stepsを順番に実行"
    2: "lint-stagedが動作しない場合":
      - "package.jsonのlint-staged設定を確認"
      - "npx lint-staged --debugで詳細なログを確認" 